name: Tag

on:
  push:
    branches: [master]
    paths:
      - "version.json"

jobs:
  tag:
    name: Tag
    runs-on: ubuntu-latest
    steps:
      - name: Check out code
        uses: actions/checkout@v2
      - name: Get Current Version
        id: version
        uses: notiz-dev/github-action-json-property@release
        with:
          path: "version.json"
          prop_path: "version"
      - name: Tag
        uses: anothrNick/github-tag-action@1.26.0
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
          CUSTOM_TAG: "v${{ steps.version.outputs.prop }}"